<!DOCTYPE html>
<html lang="en">
<head>
    <title>Test Tube Color Detection AppV1</title>
</head>
<body>
    <h1>Test Tube Color Detection App</h1>
    <input type="file" id="inputImage" accept="image/*">
    <canvas id="originalCanvas"></canvas>
    <canvas id="filteredCanvas"></canvas>

    <script>
        const inputImage = document.getElementById('inputImage');
        const originalCanvas = document.getElementById('originalCanvas');
        const filteredCanvas = document.getElementById('filteredCanvas');

        inputImage.addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = new Image();
                    img.onload = function() {
                        originalCanvas.width = img.width;
                        originalCanvas.height = img.height;
                        filteredCanvas.width = img.width;
                        filteredCanvas.height = img.height;

                        const ctxOriginal = originalCanvas.getContext('2d');
                        const ctxFiltered = filteredCanvas.getContext('2d');
                        ctxOriginal.drawImage(img, 0, 0);

                        const imageData = ctxOriginal.getImageData(0, 0, img.width, img.height);
                        const data = imageData.data;

                        // Loop through each pixel to detect pink and yellow
                        for (let i = 0; i < data.length; i += 4) {
                            const r = data[i];
                            const g = data[i + 1];
                            const b = data[i + 2];

                            // Pink detection (high red and blue values, low green)
                            if (r > 150 && g < 100 && b > 150) {
                                data[i] = 255;   // Red
                                data[i + 1] = 0; // Green
                                data[i + 2] = 255; // Blue (pure pink)
                            }
                            // Yellow detection (high red and green, low blue)
                            else if (r > 150 && g > 150 && b < 100) {
                                data[i] = 255;   // Red
                                data[i + 1] = 255; // Green
                                data[i + 2] = 0; // Blue (pure yellow)
                            }
                            // Otherwise leave the color as is (for transparency/other colors)
                        }

                        // Update the filtered canvas with new image data
                        ctxFiltered.putImageData(imageData, 0, 0);
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        });
    </script>
</body>
</html>
